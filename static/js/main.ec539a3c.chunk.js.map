{"version":3,"sources":["fsm/index.js","components/Input/StyledInput.js","components/Input/Input.js","components/Output/StyledOutput.js","components/Output/Output.js","pages/MainPage/StyledMainPage.js","pages/MainPage/MainPage.js","fsm/fsm-react.js","App.js","reportWebVitals.js","index.js"],"names":["FSM","initialState","states","error","transitionSubsrcibers","Set","errorSubscribers","this","state","transitionName","nextState","transitions","forEach","transitionFunction","errorFunction","onTransition","onError","add","delete","Container","styled","div","Title","h1","TitleContainer","Button","button","ErrorMsg","Input","parsingError","filteredFsm","clickHandler","useState","JSON","stringify","undefined","code","setCode","onClick","value","onValueChange","highlight","languages","js","padding","style","minHeight","overflow","fontSize","DropDownContainer","ActionStackContainer","StackContainer","DropDownContent","DropDownButton","Output","transition","actionsStack","setActionsStack","possibilities","mappedPossibilities","Object","keys","console","log","dropDownHovered","setDropDownHovered","onMouseLeave","onMouseEnter","map","posibility","index","nextPossibleState","selected","item","toUpperCase","toString","OuterContainer","LeftContainer","RightContainer","initalFsm","up","RIGHT","right","DOWN","down","LEFT","left","UP","MainPage","fsm","setFSM","getState","setState","getError","setError","useCallback","useEffect","subscribe","unsubscribe","useFSM","fsmState","setParsingError","parsedJson","parse","e","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec539a3c.chunk.js","sourcesContent":["export class FSM {\n  state;\n  error = \"\";\n  states;\n  transitionSubsrcibers = new Set();\n  errorSubscribers = new Set();\n  constructor({ initialState, states }) {\n    this.state = initialState;\n    this.initialState = initialState;\n    this.states = states;\n  }\n\n  transition(transitionName) {\n    const nextState = this.states[this.state]?.transitions?.[transitionName];\n    //check if the state has a transition with said name\n    if (nextState) {\n      this.state = nextState;\n      this.transitionSubsrcibers.forEach((transitionFunction) =>\n        transitionFunction(this.state)\n      );\n      this.error = \"\";\n      this.errorSubscribers.forEach((errorFunction) =>\n        errorFunction(this.error)\n      );\n    } else {\n      this.error = `Error Can't transition ${this.state} to ${transitionName}`;\n      this.errorSubscribers.forEach((errorFunction) =>\n        errorFunction(this.error)\n      );\n    }\n  }\n\n  getState() {\n    return this.state;\n  }\n\n  getError() {\n    if (this.error) {\n      return this.error;\n    }\n  }\n\n  subscribe(onTransition, onError) {\n    this.transitionSubsrcibers.add(onTransition);\n    onError && this.errorSubscribers.add(onError);\n  }\n  unsubscribe(onTransition, onError) {\n    this.transitionSubsrcibers.delete(onTransition);\n    onError && this.errorSubscribers.delete(onError);\n  }\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  padding: 32px;\n  display: flex;\n  flex-direction: column;\n`;\nexport const Title = styled.h1`\n  margin-right: 16px;\n  color: grey;\n`;\nexport const TitleContainer = styled.div`\n  display: flex;\n  align-items: center;\n`;\nexport const Button = styled.button`\n  height: 30px;\n  width: 140px;\n  font-weight: 600;\n  background-color: white;\n  border: none;\n  color: grey;\n  transition: 0.3s;\n  &:hover {\n    background-color: grey;\n    color: white;\n    opacity: 0.8;\n  }\n`;\nexport const ErrorMsg = styled.div`\n  color: red;\n  font-weight: 600;\n`;\n","import React, { useState } from \"react\";\nimport {\n  Button,\n  Container,\n  ErrorMsg,\n  Title,\n  TitleContainer,\n} from \"./StyledInput\";\n\nimport Editor from \"react-simple-code-editor\";\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-clike\";\nimport \"prismjs/components/prism-javascript\";\nimport \"prismjs/themes/prism.css\"; //Example style, you can use another\n\nconst Input = ({ parsingError, filteredFsm, clickHandler }) => {\n  const [code, setCode] = useState(JSON.stringify(filteredFsm, undefined, 2));\n  return (\n    <Container>\n      <TitleContainer>\n        <Title>FSM Editor</Title>\n        <Button onClick={() => clickHandler(code)}>Generate Fsm</Button>\n      </TitleContainer>\n\n      {parsingError && <ErrorMsg>this is not a valid json</ErrorMsg>}\n      <Editor\n        value={code}\n        onValueChange={setCode}\n        highlight={(code) => highlight(code, languages.js)}\n        padding={10}\n        style={{\n          minHeight: \"500px\",\n          overflow: \"auto\",\n          fontSize: \"20px\",\n        }}\n      />\n    </Container>\n  );\n};\n\nexport default Input;\n","import styled from \"styled-components\";\n\nexport const DropDownContainer = styled.div`\n  height: 60px;\n  width: 160px;\n  overflow: auto;\n`;\nexport const ActionStackContainer = styled.div`\n  overflow: auto;\n`;\nexport const StackContainer = styled.div`\n  display: flex;\n`;\nexport const Container = styled.div`\n  height: 100%;\n  width: 100%;\n`;\nexport const DropDownContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100px;\n  overflow: auto;\n  position: absolute;\n  background-color: #f1f1f1;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n  background-color: #ddd;\n`;\n\nexport const DropDownButton = styled.button`\n  color: white;\n  height: 50px;\n  padding: 16px;\n  font-size: 16px;\n  border: none;\n  background-color: grey;\n`;\nexport const Button = styled.button`\n  min-height: 30px;\n  width: 100%;\n  font-weight: 600;\n  background-color: white;\n  border: none;\n  color: grey;\n  transition: 0.3s;\n  &:hover {\n    background-color: grey;\n    color: white;\n    opacity: 0.8;\n  }\n`;\n","import React, { useState } from \"react\";\nimport {\n  ActionStackContainer,\n  Button,\n  Container,\n  DropDownButton,\n  DropDownContainer,\n  DropDownContent,\n  StackContainer,\n} from \"./StyledOutput\";\n\nconst Output = ({\n  transition,\n  filteredFsm,\n  state,\n  actionsStack,\n  setActionsStack,\n}) => {\n  const possibilities = filteredFsm?.states[state]?.transitions;\n  const mappedPossibilities = Object.keys(possibilities);\n  console.log({ mappedPossibilities });\n  const [dropDownHovered, setDropDownHovered] = useState(false);\n  return (\n    <Container>\n      <DropDownContainer onMouseLeave={() => setDropDownHovered(false)}>\n        <DropDownButton onMouseEnter={() => setDropDownHovered(true)}>\n          Select Next State\n        </DropDownButton>\n        {dropDownHovered && (\n          <DropDownContent>\n            {possibilities &&\n              mappedPossibilities.map((posibility, index) => {\n                return (\n                  <Button\n                    key={index}\n                    onClick={() => {\n                      setActionsStack([\n                        ...actionsStack,\n                        {\n                          state,\n                          nextPossibleState:\n                            filteredFsm?.states[state]?.transitions,\n                          selected: posibility,\n                        },\n                      ]);\n                      transition(posibility);\n                    }}\n                  >\n                    {posibility}\n                  </Button>\n                );\n              })}\n          </DropDownContent>\n        )}\n      </DropDownContainer>\n      <ActionStackContainer>\n        {actionsStack.map((item, index) => {\n          const { state, nextPossibleState, selected } = item;\n          return (\n            <StackContainer key={index}>\n              current state : {state.toUpperCase()} next possible states :[\n              {Object.keys(nextPossibleState).toString()}] selected: {selected}\n            </StackContainer>\n          );\n        })}\n      </ActionStackContainer>\n    </Container>\n  );\n};\n\nexport default Output;\n","import styled from \"styled-components\";\n\nexport const OuterContainer = styled.div`\n  display: flex;\n  height: 100vh;\n  width: 100vw;\n  flex: 1;\n`;\nexport const LeftContainer = styled.div`\n  background-color: whitesmoke;\n  height: 100%;\n  width: 100%;\n`;\nexport const RightContainer = styled.div`\n  background-color: white;\n  height: 100%;\n  width: 100%;\n`;\n","import React, { useState } from \"react\";\nimport { FSM } from \"../../fsm\";\nimport { useFSM } from \"../../fsm/fsm-react\";\nimport Input from \"../../components/Input/Input\";\nimport Output from \"../../components/Output/Output\";\nimport {\n  LeftContainer,\n  OuterContainer,\n  RightContainer,\n} from \"./StyledMainPage\";\n\nconst initalFsm = {\n  initialState: \"up\",\n  states: {\n    up: {\n      transitions: {\n        RIGHT: \"right\",\n      },\n    },\n    right: {\n      transitions: {\n        DOWN: \"down\",\n      },\n    },\n    down: {\n      transitions: {\n        LEFT: \"left\",\n      },\n    },\n    left: {\n      transitions: {\n        UP: \"up\",\n      },\n    },\n  },\n};\n\nconst MainPage = () => {\n  const [fsm, setFSM] = useState(() => new FSM(initalFsm));\n  const [actionsStack, setActionsStack] = useState([]);\n  const { state: fsmState, transition } = useFSM(fsm);\n  const {\n    state,\n    error,\n    errorSubscribers,\n    transitionSubsrcibers,\n    ...filteredFsm\n  } = fsm;\n  const [parsingError, setParsingError] = useState(null);\n  const clickHandler = (code) => {\n    try {\n      const parsedJson = JSON.parse(code);\n      setFSM(new FSM(parsedJson));\n    } catch (e) {\n      setParsingError(e);\n    }\n  };\n\n  return (\n    <OuterContainer>\n      <LeftContainer>\n        <Input\n          parsingError={parsingError}\n          filteredFsm={filteredFsm}\n          clickHandler={clickHandler}\n        />\n      </LeftContainer>\n      <RightContainer>\n        <Output\n          transition={transition}\n          filteredFsm={filteredFsm}\n          state={fsmState}\n          actionsStack={actionsStack}\n          setActionsStack={setActionsStack}\n        />\n      </RightContainer>\n    </OuterContainer>\n  );\n};\n\nexport default MainPage;\n","import { useState, useCallback, useEffect } from \"react\";\n\nexport const useFSM = (fsm) => {\n  const [state, setState] = useState(fsm.getState());\n  const [error, setError] = useState(fsm.getError());\n\n  const onTransition = useCallback((nextState) => {\n    setState(nextState);\n  }, []);\n  const onError = useCallback((error) => {\n    setError(error);\n  }, []);\n\n  useEffect(() => {\n    fsm.subscribe(onTransition, onError);\n    return () => {\n      fsm.unsubscribe(onTransition, onError);\n    };\n  }, [fsm, onTransition, onError]);\n\n  useEffect(() => {\n    if (fsm.getState() !== state) {\n      setState(fsm.getState());\n    }\n  }, [fsm, state]);\n\n  const transition = useCallback(\n    (transitionName) => {\n      fsm.transition(transitionName);\n    },\n    [fsm]\n  );\n\n  return { state, error, transition };\n};\n","import MainPage from \"./pages/MainPage/MainPage\";\n\nconst App = () => {\n  return <MainPage />;\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}