{"version":3,"sources":["fsm/index.js","components/Input/StyledInput.js","components/Input/Input.js","components/Output/StyledOutput.js","components/Output/Output.js","pages/MainPage/StyledMainPage.js","pages/MainPage/MainPage.js","fsm/fsm-react.js","App.js","reportWebVitals.js","index.js"],"names":["FSM","initialState","states","error","transitionSubsrcibers","Set","errorSubscribers","this","state","transitionName","nextState","transitions","forEach","transitionFunction","errorFunction","onTransition","onError","add","delete","Container","styled","div","Title","h1","TitleContainer","Button","button","ErrorMsg","Input","parsingError","filteredFsm","clickHandler","useState","JSON","stringify","undefined","code","setCode","onClick","value","onValueChange","highlight","languages","js","padding","style","minHeight","overflow","fontSize","DropDownContainer","ActionStackContainer","StackContainer","DropDownContent","DropDownButton","Output","transition","actionsStack","setActionsStack","possibilities","mappedPossibilities","Object","keys","console","log","dropDownHovered","setDropDownHovered","onMouseLeave","onMouseEnter","map","posibility","index","nextPossibleState","selected","item","toUpperCase","toString","OuterContainer","LeftContainer","RightContainer","initalFsm","MainPage","fsm","setFSM","getState","setState","getError","setError","useCallback","useEffect","subscribe","unsubscribe","useFSM","fsmState","setParsingError","parsedJson","parse","e","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9ff13357.chunk.js","sourcesContent":["export class FSM {\n  state;\n  error = \"\";\n  states;\n  transitionSubsrcibers = new Set();\n  errorSubscribers = new Set();\n  constructor({initialState, states}){\n    this.state = initialState;\n    this.initialState = initialState\n    this.states = states;\n  }\n\n  transition(transitionName) {\n    const nextState = this.states[this.state]?.transitions?.[transitionName];\n    //check if the state has a transition with said name\n    if (nextState) {\n      this.state = nextState;\n      this.transitionSubsrcibers.forEach((transitionFunction) =>\n        transitionFunction(this.state)\n      );\n      this.error = \"\";\n      this.errorSubscribers.forEach((errorFunction) =>\n        errorFunction(this.error)\n      );\n    } else {\n      this.error = `Error Can't transition ${this.state} to ${transitionName}`;\n      this.errorSubscribers.forEach((errorFunction) =>\n        errorFunction(this.error)\n      );\n    }\n  }\n\n\n  getState(){\n    return this.state\n  }\n\n  getError(){\n    if(this.error){\n      return this.error\n    }\n  }\n\n  subscribe(onTransition, onError){\n    this.transitionSubsrcibers.add((onTransition))\n    onError && this.errorSubscribers.add((onError))\n  }\n  unsubscribe(onTransition, onError){\n    this.transitionSubsrcibers.delete((onTransition))\n    onError && this.errorSubscribers.delete((onError))\n  }\n\n}","import styled from 'styled-components'\n\n\nexport const Container = styled.div`\npadding: 32px;\ndisplay: flex;\nflex-direction: column;\n`\nexport const Title = styled.h1`\nmargin-right: 16px;\ncolor:grey;\n`\nexport const TitleContainer = styled.div`\ndisplay: flex;\nalign-items: center;\n`\nexport const Button = styled.button`\n    height: 30px;\n    width: 140px;\n    font-weight: 600;\n    background-color: white;\n    border: none;\n    color: grey;\n    transition: 0.3s;\n    &:hover{\n        background-color: grey;\n        color: white;\n        opacity: 0.8;\n    }\n`\nexport const ErrorMsg = styled.div`\n  color:red;\n  font-weight: 600;\n`\n\n","import React ,{useState}from 'react'\nimport { Button, Container, ErrorMsg,  Title, TitleContainer } from './StyledInput'\n\nimport Editor from \"react-simple-code-editor\";\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-clike\";\nimport \"prismjs/components/prism-javascript\";\nimport \"prismjs/themes/prism.css\"; //Example style, you can use another\n\nconst Input = ({ parsingError,filteredFsm,clickHandler }) => {\n   const [code, setCode] = useState(JSON.stringify(filteredFsm,undefined,2))\n    return (\n        \n        <Container>\n          <TitleContainer>\n          <Title>FSM Editor</Title>\n          <Button onClick={()=>clickHandler(code)}>Generate Fsm</Button>\n          </TitleContainer>\n        \n        {parsingError&&<ErrorMsg>this is not a valid json</ErrorMsg>}\n        <Editor\n          value={code}\n          onValueChange={setCode}\n          highlight={(code) => highlight(code, languages.js)}\n          padding={10}\n          style={{\n            minHeight: '500px',\n            overflow: 'auto',\n            fontSize: '20px',\n          }}\n        />\n        </Container>\n    )\n}\n\nexport default Input\n","import styled from 'styled-components'\n\nexport const DropDownContainer = styled.div`\nheight: 60px;\nwidth: 160px;\noverflow: auto;\n`\nexport const ActionStackContainer = styled.div`\noverflow: auto;\n`\nexport const StackContainer = styled.div`\ndisplay: flex;\n\n`\nexport const Container = styled.div`\n  height: 100%;\n  width: 100%;\n`\nexport const DropDownContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100px;\n  overflow: auto;\n  position: absolute;\n  background-color: #f1f1f1;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  z-index: 1;\n  background-color: #ddd;\n`\n\nexport const DropDownButton = styled.button`\n  color: white;\n  height: 50px;\n  padding: 16px;\n  font-size: 16px;\n  border: none;\n  background-color: grey;\n`\nexport const Button = styled.button`\n  min-height: 30px;\n  width: 100%;\n  font-weight: 600;\n  background-color: white;\n  border: none;\n  color: grey;\n  transition: 0.3s;\n  &:hover{\n      background-color: grey;\n      color: white;\n      opacity: 0.8;\n  }\n`\n\n\n\n\n\n\n\n","import React, { useState } from 'react'\nimport { ActionStackContainer, Button, Container, DropDownButton, DropDownContainer, DropDownContent, StackContainer } from './StyledOutput';\n\nconst Output = ({transition,filteredFsm,state,actionsStack,setActionsStack}) => {\n    const possibilities = filteredFsm?.states[state]?.transitions\n    const mappedPossibilities = Object.keys(possibilities)\n    console.log({mappedPossibilities});\n    const [dropDownHovered, setDropDownHovered] = useState(false)\n    return (\n        <Container>\n            <DropDownContainer  onMouseLeave={()=>setDropDownHovered(false)}>\n            <DropDownButton onMouseEnter={()=>setDropDownHovered(true)}>Select Next State</DropDownButton>\n                 {dropDownHovered&& <DropDownContent >\n                      {possibilities && mappedPossibilities.map((posibility,index)=>{\n                            return<Button key={index} onClick={()=>{\n                                setActionsStack([...actionsStack,{state,nextPossibleState:filteredFsm?.states[state]?.transitions,selected:posibility}])\n                                transition(posibility)\n                            }}>{posibility}</Button>\n                        })}\n                 </DropDownContent>\n                }\n            </DropDownContainer><ActionStackContainer>\n                {actionsStack.map((item,index)=>{\n                    const {state,nextPossibleState,selected} = item\n                    return <StackContainer key={index}>current state : {state.toUpperCase()} next possible states :[{Object.keys(nextPossibleState).toString()}] selected: {selected}\n                    </StackContainer>\n                })}</ActionStackContainer>\n       </Container>\n    )\n}\n\nexport default Output\n","import styled from 'styled-components'\n\n\n\nexport const OuterContainer = styled.div`\n    display: flex;\n    height:100vh;\n    width:100vw;\n    flex:1;\n`\nexport const LeftContainer = styled.div`\n    background-color: whitesmoke;\n    height: 100%;\n    width: 100%;\n`\nexport const RightContainer = styled.div`\n    background-color: white;\n    height: 100%;\n    width: 100%;\n`","import React, { useState } from 'react'\nimport { FSM } from '../../fsm';\nimport { useFSM } from '../../fsm/fsm-react';\nimport Input from '../../components/Input/Input'\nimport Output from '../../components/Output/Output'\nimport { LeftContainer, OuterContainer, RightContainer } from './StyledMainPage'\n\nconst initalFsm = {\n    \"initialState\": \"up\",\n    \"states\": {\n    \"up\": {\n      \"transitions\": {\n        \"RIGHT\": \"right\",\n      }\n    },\n    \"right\": {\n      \"transitions\": {\n        \"DOWN\": \"down\"\n      }\n    },\n    \"down\": {\n      \"transitions\": {\n        \"LEFT\": \"left\"\n      }\n    },\n    \"left\": {\n      \"transitions\": {\n        \"UP\": \"up\"\n      }\n    }\n    }\n  };\n\nconst MainPage = () => {\n    const [fsm, setFSM] = useState(()=>new FSM(initalFsm))\n    const [actionsStack, setActionsStack] = useState([])\n    const { state:fsmState, transition } = useFSM(fsm);\n    const{state,error,errorSubscribers,transitionSubsrcibers,...filteredFsm} = fsm\n    const [parsingError, setParsingError] = useState(null)\n    const clickHandler=(code)=>{\n        try {\n            const parsedJson = JSON.parse(code);\n                setFSM(\n                   new FSM(parsedJson)\n                )\n        } catch (e) {\n            setParsingError(e);\n        }\n    }\n\n    return (\n        <OuterContainer>\n            <LeftContainer><Input parsingError={parsingError} filteredFsm={filteredFsm} clickHandler={clickHandler}/></LeftContainer>\n            <RightContainer><Output transition={transition} filteredFsm={filteredFsm} state={fsmState} actionsStack={actionsStack} setActionsStack={setActionsStack}/></RightContainer>\n        </OuterContainer>\n    )\n}\n\nexport default MainPage\n","import { useState, useCallback, useEffect } from 'react'\n\nexport const useFSM=(fsm)=>{\n    const [state, setState] = useState(fsm.getState())\n    const [error, setError] = useState(fsm.getError())\n\n    const onTransition = useCallback(\n        (nextState) => {\n      \n            setState(nextState)\n        },\n        [],\n    )\n    const onError = useCallback(\n        (error) => {\n            setError(error)\n        },\n        [],\n    )\n\n    useEffect(() => {\n        fsm.subscribe(onTransition,onError)\n        return () => {\n            fsm.unsubscribe(onTransition,onError)\n        }\n    }, [fsm,onTransition,onError])\n\n    useEffect(() => {\n        if(fsm.getState()!== state){\n            setState(fsm.getState())\n        }\n    }, [fsm,state])\n\n    const transition =useCallback(\n        (transitionName) => {\n            fsm.transition(transitionName)\n        },\n        [fsm],\n    )\n\n    return {state, error, transition}\n}","import MainPage from './pages/MainPage/MainPage';\n\nconst App=()=> {\n  return <MainPage/>\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}